/* Smooth scrolling
   Changes links that link to other parts of this page to scroll
   smoothly to those links rather than jump to them directly, which
   can be a little disorienting.
   
   sil, http://www.kryogenix.org/
   
   v1.0 2003-11-11
   v1.1 2005-06-16 wrap it up in an object
*/

var smoothScrolling={fixAllLinks:function(){for(var c=document.getElementsByTagName("a"),b=0;b<c.length;b++){var a=c[b];!a.href||-1==a.href.indexOf("#")||a.pathname!=location.pathname&&"/"+a.pathname!=location.pathname||a.search!=location.search||smoothScrolling.addEvent(a,"click",smoothScrolling.scroll)}},scroll:function(c){if(window.event)target=window.event.srcElement;else if(c)target=c.target;else return;"a"!=target.nodeName.toLowerCase()&&(target=target.parentNode);if("a"==target.nodeName.toLowerCase()){anchor= target.hash.substr(1);for(var b=document.getElementsByTagName("a"),a=null,d=0;d<b.length;d++){var e=b[d];if(e.name&&e.name==anchor){a=e;break}}a||(a=document.getElementById(anchor));if(!a)return!0;for(b=a.offsetTop;a.offsetParent&&a.offsetParent!=document.body;)a=a.offsetParent,b+=a.offsetTop;clearInterval(smoothScrolling.INTERVAL);cypos=smoothScrolling.getCurrentYPos();smoothScrolling_stepsize=parseInt((b-cypos)/smoothScrolling.STEPS);smoothScrolling.INTERVAL=setInterval("smoothScrolling.scrollWindow("+ smoothScrolling_stepsize+","+b+',"'+anchor+'")',10);window.event&&(window.event.cancelBubble=!0,window.event.returnValue=!1);c&&c.preventDefault&&c.stopPropagation&&(c.preventDefault(),c.stopPropagation())}},scrollWindow:function(c,b,a){wascypos=smoothScrolling.getCurrentYPos();isAbove=wascypos<b;window.scrollTo(0,wascypos+c);iscypos=smoothScrolling.getCurrentYPos();isAboveNow=iscypos<b;if(isAbove!=isAboveNow||wascypos==iscypos)window.scrollTo(0,b),clearInterval(smoothScrolling.INTERVAL),location.hash= a},getCurrentYPos:function(){return document.body&&document.body.scrollTop?document.body.scrollTop:document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:window.pageYOffset?window.pageYOffset:0},addEvent:function(c,b,a,d){if(c.addEventListener)return c.addEventListener(b,a,d),!0;if(c.attachEvent)return c.attachEvent("on"+b,a);alert("Handler could not be removed")},STEPS:25};smoothScrolling.addEvent(window,"load",smoothScrolling.fixAllLinks);